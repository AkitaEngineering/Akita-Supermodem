# Akita Supermodem

**Organization:** Akita Engineering
**Contact:** info@akitaengineering.com
**Website:** [www.akitaengineering.com](https://www.akitaengineering.com)

---

Akita Supermodem is a Python library implementing a robust file transfer protocol designed for low-bandwidth, potentially unreliable mesh networks like Meshtastic. It breaks files into pieces, uses hashing (individual or Merkle Tree) for integrity, and features a resume mechanism to handle packet loss.

## Features

* **File Segmentation:** Transfers large files by splitting them into smaller pieces.
* **Integrity Checking:** Uses SHA256 hashes for individual pieces and optional Merkle Trees for overall file verification.
* **Resume Capability:** Receivers can request missing or corrupted pieces, allowing transfers to recover from interruptions.
* **Rate Control:** Sender adjusts transmission speed based on acknowledgements and retries.
* **Protocol Buffers:** Uses efficient Protobuf messages for communication.
* **Meshtastic Integration:** Designed to work as a module within the Meshtastic ecosystem using a specific PortNum.

## Project Structure
```
akita-supermodem/
├── .gitignore
├── LICENSE
├── README.md
├── requirements.txt
├── pyproject.toml
├── akita_supermodem/
│   ├── init.py      # Package initializer
│   ├── common.py        # Shared constants (PortNum, hash algo) & utils
│   ├── sender.py        # AkitaSender class
│   ├── receiver.py      # AkitaReceiver class
│   ├── proto/
│   │   └── akita.proto  # Protocol Buffers definition
│   └── generated/       # Generated protobuf Python code
│       └── init.py
│       └── akita_pb2.py # Generated by protoc
├── examples/
│   ├── send_file.py     # Example sender script
│   └── receive_files.py # Example receiver script
├── docs/
│   ├── index.md         # Documentation entry point
│   ├── protocol.md      # Protocol details
│   └── usage.md         # Usage guide
└── tests/               # Unit test
├── init.py
# ... test files ...
```

## Installation

1.  **Prerequisites:**
    * Python 3.7+
    * `pip` (Python package installer)
    * `protoc` (Protocol Buffer Compiler). See: [Protocol Buffer Compiler Installation](https://grpc.io/docs/protoc-installation/)

2.  **Clone the repository:**
    ```bash
    git clone [https://github.com/AkitaEngineering/akita-supermodem.git](https://github.com/AkitaEngineering/akita-supermodem.git)
    cd akita-supermodem
    ```

3.  **Install dependencies:**
    ```bash
    pip install -r requirements.txt
    ```

4.  **Generate Protobuf code:**
    Run this command from the root directory of the repository:
    ```bash
    protoc --python_out=./akita_supermodem/generated --proto_path=./akita_supermodem/proto ./akita_supermodem/proto/akita.proto
    # Create __init__.py if it doesn't exist (needed for package recognition)
    touch ./akita_supermodem/generated/__init__.py
    ```
    This creates `akita_supermodem/generated/akita_pb2.py`.

5.  **(Optional) Install the package locally:**
    For development or making the package importable:
    ```bash
    pip install .
    ```

## Usage

See the `examples/` directory and the [Usage Guide](docs/usage.md) for detailed integration steps.

**Core Concepts:**

* **`AkitaSender`**: Initiates and manages outgoing file transfers. Requires a `meshtastic` interface object.
* **`AkitaReceiver`**: Manages incoming transfers, requests missing pieces, and saves files. Requires callbacks for saving data and sending responses.
* **Callbacks**: Your application needs an `on_receive` callback registered with Meshtastic to route incoming Akita packets (identified by `AKITA_CONTENT_TYPE` PortNum) to the correct `AkitaReceiver` or `AkitaSender` methods.

## Documentation

* [Protocol Details](docs/protocol.md)
* [Usage Guide](docs/usage.md)

## Contributing

Contributions are welcome! Please fork the repository, create a feature branch, add your changes (including tests), ensure code quality, and submit a Pull Request.

## License

This project is licensed under the GPLv3 License - see the [LICENSE](LICENSE) file for details.
